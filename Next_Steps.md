# Next Steps

## Tasks

- [x] Consolidate planning collateral into `docs/roadmap.md` and simplify top-level release docs (Owner: Product, Due: 2025-10-25)
- [x] Publish Diátaxis-aligned docs set with style and contributing guidance (Owner: Docs, Due: 2025-10-25)
- [x] Validate Docker image build and publish pipeline in CI (Owner: DevOps, Due: 2025-11-08)
- [x] Quieten Prefect/OpenTelemetry console handlers to prevent ValueError on process shutdown during QA tooling (Owner: Engineering, Due: 2025-11-08)
- [x] Re-enable skipped integration suites once optional dependencies can be installed in CI without instability (Owner: Engineering, Due: 2025-11-15)
- [x] Merge entity registry history during deduplication to unlock roadmap follow-up (Owner: Engineering, Due: 2025-11-01)
- [x] Add regression coverage for dashboard persistence helpers (Owner: Engineering, Due: 2025-11-01)
- [x] Confirm Streamlit dashboard authentication and hosting controls (Owner: Platform, Due: 2025-11-22)
- [x] Decide secrets management approach for registry connectors and telemetry endpoints (Owner: DevOps, Due: 2025-11-22)
- [x] Harden Streamlit dashboard authentication and filesystem allowlists (Owner: Platform, Due: 2025-11-22)
- [x] Enforce Prefect deployment parameter validation and policies (Owner: Engineering, Due: 2025-11-22)
- [x] Replace curl-pipe installer in Dockerfile with pinned, verified artefacts (Owner: DevOps, Due: 2025-11-15)
- [x] Pin GitHub Actions to commit SHAs and add artifact checksum publication (Owner: DevOps, Due: 2025-11-15)
- [x] Implement CLI log redaction strategy for PII-bearing metrics (Owner: Engineering, Due: 2025-11-22)
- [x] Improve mutation kill rate for quality/pipeline flows via additional assertions or fixtures (Owner: Engineering, Due: 2025-11-29)
- [x] Establish compliance baseline matrices and backlog (Owner: Compliance, Due: 2025-10-25)
- [x] Automate consent validation per POPIA-001 (Owner: Product & Engineering, Due: 2025-11-22)
- [x] Build comprehensive asset register per ISO27001-002 (Owner: Security & Platform, Due: 2025-11-29)
- [x] Maintain SOC 2 risk register seeded from threat model (Owner: Security, Due: 2025-11-22)
- [x] Implement Vault-backed secret delivery for CI workflows and Prefect deployments (Owner: DevOps, Due: 2025-12-06)
- [x] Capture consent validation audit logs within Prefect evidence exports (Owner: Product & Engineering, Due: 2025-12-06)
- [x] Harden refined data confidentiality controls (Owner: Platform, Due: 2025-12-13)
- [x] Launch quarterly compliance verification cadence (Owner: Compliance, Due: 2025-01-15)
- [x] Consolidate CLI and Prefect orchestration logic with structured error handling (Owner: Engineering, Due: 2025-12-13)
- [x] Remove Prefect console handler monkey patch in favour of scoped logging (Owner: Platform, Due: 2025-12-13)
- [x] Wire cron scheduling/work pool options through `deploy_pipeline` and add regression tests (Owner: Engineering, Due: 2025-12-20)
- [x] Harden entity history parsing to avoid `ast.literal_eval` and add fixtures (Owner: Engineering, Due: 2025-12-20)
- [x] Optimise geospatial distance calculations and expose actionable errors (Owner: Data, Due: 2025-12-20)
- [x] Add deterministic evidence logging tests covering consent/export helpers (Owner: Compliance & QA, Due: 2025-12-06)
- [x] Create dependency-light fixtures so enhanced CLI/geospatial/entity resolution paths run in CI (Owner: QA, Due: 2025-12-27)
- [ ] Exercise CLI progress reporting under high-volume fixtures to validate UX responsiveness (Owner: QA, Due: 2025-12-20)
- [ ] Document bootstrap execute-mode guardrails and rollback guidance in `docs/how-to-guides/` (Owner: Docs, Due: 2025-11-30)
- [ ] Execute full E2E runs with canonical configuration toggling entity resolution, geospatial, and compliance stacks (Owner: QA, Due: 2025-12-31)
- [ ] Add Prefect flow integration tests covering canonical config overrides (Owner: Engineering, Due: 2025-12-31)
- [ ] Benchmark `HotpassConfig.merge` behaviour on large payloads and record guardrails (Owner: Engineering, Due: 2026-01-15)
- [x] Harden Prefect backfill concurrency fallback for CLI + flow coverage (Owner: Engineering, Due: 2025-12-20)
- [ ] Validate Prefect backfill deployment concurrency guardrails in staging (Owner: Platform, Due: 2026-01-05)
- [x] Implement registry provider adapters for CIPC/SACAA with throttling, caching, and normalised schemas (Owner: Engineering, Due: 2026-01-05)
- [x] Extend registry enrichment dispatch with structured results and resilient error handling (Owner: Engineering, Due: 2026-01-05)
- [x] Document registry configuration, credentials, and policy expectations for new providers (Owner: Docs & Compliance, Due: 2026-01-05)
- [x] Ship rate-limited intent collectors with persistence and provenance metadata (Owner: Engineering, Due: 2025-11-15)
- [x] Train and integrate lead scoring models with automated daily list exports (Owner: Data & Engineering, Due: 2025-11-22)
- [x] Wire CLI/Prefect automation for intent digests and CRM/webhook delivery, update docs (Owner: Engineering & Docs, Due: 2025-11-22)
- [x] Implement acquisition agent task orchestration for search, crawl, and API phases (Owner: Engineering, Due: 2025-11-05)
- [x] Ship provider adapters with robots/ToS compliance, cached credential access, and provenance metadata (Owner: Engineering, Due: 2025-11-05)
- [x] Extend orchestrator scheduling and blended acquisition fixtures with configuration toggles (Owner: Engineering & QA, Due: 2025-11-08)
- [x] Refactor storage transforms to Polars with DuckDB adapters and benchmark guardrails (Owner: Engineering, Due: 2026-02-14)
- [x] Instrument ingest→publish pipeline stages with OpenTelemetry spans and dashboard surfacing (Owner: Engineering, Due: 2026-02-14)
- [x] Refresh UV tooling, pre-commit hooks, and observability documentation (Owner: Platform & Docs, Due: 2026-02-14)
- [x] Expand tests for telemetry hooks, Polars/DuckDB determinism, and performance guardrails (Owner: QA & Engineering, Due: 2026-02-21)
- [x] Deliver probabilistic entity resolution with review (Owner: Engineering, Due: 2026-01-31)
- [x] Restore baseline QA suite after introducing Splink linkage dependencies (Owner: QA, Due: 2026-01-07)
- [x] Enforce governed ingest schemas with Frictionless + Great Expectations validation gates (Owner: Engineering, Due: 2025-12-27)
- [x] Introduce shared data normalisers with Polars/DuckDB persistence for refined outputs (Owner: Engineering, Due: 2026-01-10)
- [x] Expand regression coverage and documentation for input formatting and validation flows (Owner: QA & Docs, Due: 2025-12-27)
- [x] Publish guidance for enabling Prefect runtime via `HOTPASS_ENABLE_PREFECT_RUNTIME` in orchestration docs (Owner: Platform, Due: 2025-11-30)
- [x] Gate agent-triggered Prefect runs with MCP allowlists, audit logging, and operator docs (Owner: Engineering, Due: 2025-12-27)
- [x] Modularise telemetry registry with policy enforcement and exporter lifecycle coverage (Owner: Engineering, Due: 2025-11-03)
- [x] Build multi-source acquisition framework with provider registry and orchestrator integration (Owner: Engineering, Due: 2025-10-28)
- [x] Add real-time contact validation and scoring (Owner: Engineering, Due: 2025-11-05)
- [x] Deliver intent-signal and automation pipeline (Owner: Engineering, Due: 2025-11-12)
- [x] Document observability configuration changes and refresh governance metrics (Owner: Docs & Platform, Due: 2025-11-03)
- [x] Restore QA gates after telemetry refactor (Owner: QA, Due: 2025-11-04)
- [x] Design unified CLI command surface aligned with orchestrator presets (Owner: Engineering, Due: 2026-02-28)
- [x] Implement modular CLI builder with shared options and feature modules (Owner: Engineering, Due: 2026-02-28)
- [x] Introduce Pydantic-validated configuration profiles with opt-in guardrails (Owner: Engineering, Due: 2026-02-28)
- [x] Refresh CLI documentation, tutorials, and retire legacy commands (Owner: Docs, Due: 2026-03-07)
- [x] Extend CLI integration tests and rerun QA suite post-consolidation (Owner: QA & Engineering, Due: 2026-03-07)
- [x] Deliver lead scoring validation metrics persistence and documentation guidance (Owner: Engineering & Docs, Due: 2025-12-05)
- [ ] Add regression coverage for modular pipeline stages (Owner: QA & Engineering, Due: 2025-12-13)
- [x] Seed Conventional Commit label set (`type:*`, `scope:*`, `prefect`, `uv`, `skip-changelog`) in GitHub repo settings (Owner: Platform, Due: 2025-12-05) — Completed 2025-10-28 via `gh label create ... --force`; `gh label list --json name` confirms the seeded set.
- [x] Monitor commitlint/labeler/release-drafter workflow runs post-merge and capture findings in governance docs (Owner: Platform, Due: 2025-12-12) — Completed 2025-10-28; commitlint run 18875044612 succeeded in 20 s, pr-labeler run 18875148327 succeeded in 8 s after label sync, release-drafter run 18875134498 succeeded in 96 s, no manual labels beyond `codex` were needed.

## Steps

- [x] Migrated documentation to Diátaxis structure and removed duplicate legacy pages
- [x] Adopted uv_build backend with consolidated QA script and ADR record (2025-02-15)【F:pyproject.toml†L1-L25】【F:docs/adr/0001-qa-tooling.md†L1-L40】
- [x] Added docs CI workflow executing strict Sphinx builds and link checking
- [x] Refreshed README to act as a lightweight entry point into docs
- [x] Create dedicated fixtures for observability and orchestration to reduce reliance on global state between tests
- [x] Decomposed `pipeline.base` into ingestion/aggregation/validation/export modules, updated fitness gates, and reran full QA suite (pytest w/ coverage, ruff check/format, mypy, bandit, detect-secrets, uv build)【F:src/hotpass/pipeline/base.py†L1-L443】【F:src/hotpass/pipeline/aggregation.py†L1-L686】【F:src/hotpass/pipeline/ingestion.py†L1-L122】【F:src/hotpass/pipeline/export.py†L1-L171】【F:scripts/quality/fitness_functions.py†L1-L70】【51873d†L1-L118】【936d6c†L1-L1】【fcfff6†L1-L1】【3c89a7†L1-L9】【55d317†L1-L21】【b2d4de†L1-L58】【40225e†L1-L120】【c36079†L1-L2】
- [x] Capture outcomes from docs workflow once it runs on `main` (see `uv run sphinx-build` & linkcheck outputs)【5a78d4†L1-L26】【f029ee†L1-L24】
- [x] Automated quarterly verification logging via `scripts/compliance/run_verification.py`
- [x] Executed repository-wide Ruff formatting sweep and cleared lingering lint/security warnings (2025-10-26)
- [x] Added CI artifact checksum publication alongside pinned GitHub Actions references
- [x] Restore lint/type gates after refactoring observability and orchestration modules
- [x] Delivered interactive CLI progress reporting and bootstrap plan via `scripts/idp/bootstrap.py`
- [x] Implement entity registry history merge flow and regression coverage
- [x] Baseline QA check: investigate pytest polars wheel fallback, existing ruff UP038 lint, and missing requests/PyYAML type stubs before marking gates green
- [x] Introduced contact validation services, lead scoring, and SSOT confidence exports (2025-10-29)【F:src/hotpass/enrichment/validators/__init__.py†L1-L214】【F:src/hotpass/pipeline/base.py†L92-L930】
- [x] Delivered intent collectors, pipeline integration, CLI logging, and documentation updates with full QA rerun (pytest, ruff, mypy, bandit, detect-secrets, build) (2025-10-30)【F:src/hotpass/enrichment/intent/runner.py†L1-L226】【F:src/hotpass/pipeline/base.py†L80-L159】【F:docs/how-to-guides/configure-pipeline.md†L1-L210】【622b26†L1-L122】【b1dde6†L1-L2】【6425f3†L1-L2】【5b6dd7†L1-L9】【444a41†L1-L19】【41a163†L1-L68】【10061d†L1-L244】
- [x] Captured repository inventory reference with package, test, data, and workflow tables for rapid lookup.【F:docs/reference/repo-inventory.md†L1-L91】
- [x] Resolved automation HTTP client/test mypy issues and reran QA suite (pytest w/ coverage, ruff check/format, mypy, bandit, detect-secrets, uv build) (2025-10-28)【dc9cad†L1-L159】【c2bfbc†L1-L2】【a3aa76†L1-L2】【b5caad†L1-L8】【116ea0†L1-L21】【b4206a†L1-L63】【de89c8†L1-L216】
- [x] Hardened contact verification services with SMTP probes, lead-score aggregation, and SSOT confidence exports; refreshed expectations/docs (pytest, ruff, mypy, bandit, detect-secrets, build, semgrep) (2025-10-28)【F:src/hotpass/enrichment/validators/__init__.py†L1-L342】【F:src/hotpass/contacts.py†L1-L420】【F:src/hotpass/data_sources/__init__.py†L1-L420】【F:data_expectations/contact/company_contacts.json†L1-L60】【F:docs/how-to-guides/configure-pipeline.md†L1-L210】【5e2a1a†L1-L214】【bffad3†L1-L2】【de76f8†L1-L2】【ab406f†L1-L7】【9b087a†L1-L22】【658173†L1-L65】【fea736†L1-L11】【44b257†L1-L120】
- [x] Patched Great Expectations fallback fixtures and SSOT schema tests for new verification columns; reran pytest (with coverage), ruff check/format, mypy, bandit, detect-secrets, uv build (semgrep blocked by SSL) (2025-10-28)【F:tests/test_pipeline.py†L331-L362】【F:tests/test_quality.py†L17-L55】【F:src/hotpass/contacts.py†L358-L405】【F:src/hotpass/data_sources/__init__.py†L1-L80】【a0405d†L1-L176】【eea41a†L1-L2】【24d8b7†L1-L2】【0a99b2†L1-L9】【daa5cf†L1-L19】【370c0e†L1-L65】【86474f†L1-L180】【6238e4†L1-L84】
- [x] Instrumented acquisition runs with OpenTelemetry spans/metrics, added provider policy allowlist, and refreshed governance/compliance docs (2025-10-28)【F:src/hotpass/data_sources/agents/runner.py†L1-L180】【F:src/hotpass/telemetry/metrics.py†L1-L130】【F:policy/acquisition/providers.json†L1-L20】【F:docs/governance/audit-baseline.md†L1-L95】【F:docs/compliance/evidence-catalog.md†L1-L24】【F:docs/how-to-guides/configure-pipeline.md†L150-L204】
- [x] Marked roadmap phases complete and verified enhanced pipeline package contracts
- [x] Drafted governance charter and metrics instrumentation plan to guide upcoming telemetry work
- [x] Authored Structurizr DSL architecture views and documented trust boundaries, attack surfaces, and SPOFs
- [x] Flagged dashboard auth, secrets management, CI artefact handling, and Docker distribution for follow-up interviews
- [x] Compiled multi-surface STRIDE/MITRE threat model with mitigation backlog in `docs/security/threat-model.md`
- [x] Captured compliance baseline matrices, evidence catalog, and verification plan under `docs/compliance/`
- [x] Highlighted cross-framework high-risk compliance gaps with evidence pointers in `docs/compliance/index.md`
- [x] Documented SPACE-informed developer experience audit and platform backlog
- [x] Stood up developer experience playbooks, Backstage scaffolding, and supply-chain scripts with automation entry points
- [x] Completed critical reasoning checks and consolidated upgrade handover report in `docs/governance/upgrade-final-report.md`
- [x] Enforced Prefect flow parameter validation and added regression coverage for invalid inputs
- [x] Added configurable structured log redaction with default PII masks and documented usage
- [x] Secured Streamlit dashboard behind shared-secret authentication and filesystem allowlists with regression coverage and documentation updates
- [x] Documented Vault-based secrets management strategy with rollout plan
- [x] Automated POPIA consent validation with compliance reporting and regression coverage
- [x] Linked governance and security documentation into the Diátaxis toctree and cleared Sphinx cross-reference warnings
- [x] Expanded mutation regression tests around compliance/evidence flows to raise kill rate for quality and pipeline modules
- [x] Implemented Vault-backed secret sync tooling for CI and Prefect orchestrations
- [x] Persisted consent validation audit logs and refined export access evidence with updated documentation
- [x] Resolved Vault session typing gaps so mypy accepts StubSession fixtures and aligned evidence logging timestamps with `datetime.UTC`
- [x] Captured orchestration, entity resolution, geospatial, and evidence gaps ahead of research/validation overhaul (2025-10-26)
- [x] Track remediation progress for the documented gap analysis recommendations
- [x] Vendored Semgrep ruleset to unblock static analysis in sandbox environments (2025-10-26)
- [x] Embedded dashboard remediation guidance with glossary and operations links (2025-10-26)
- [x] Suppressed Great Expectations and sqlite resource warnings under `pytest -W error` via targeted filters and cleanup (2025-11-29)【4701d5†L1-L1】【09f95e†L1-L40】
- [x] Cleared CLI/pipeline lint, type, and security findings and reran the full QA suite after progress instrumentation landed (2025-10-26)
- [x] Baseline QA suite rerun for ingest schema initiative (2025-12-26)【387e77†L1-L84】
- [x] Baseline QA suite rerun with Splink linkage dependencies enabled (2025-12-27)【e8ff23†L1-L84】
- [x] Implement canonical Party/Role/Alias store, loader backfill, CLI party-store export, and data dictionary tooling (2025-10-26)【5a2f34†L1-L20】【02a776†L1-L120】
- [x] Resolved Polars grouping regression, refreshed telemetry adapters, and reran full QA suite (pytest, ruff, format, mypy, bandit, detect-secrets, uv build, uv pip check) (2025-10-26)【095878†L1-L84】【123bd6†L1-L2】【058b8a†L1-L2】【e95512†L1-L19】【8d5e85†L5-L27】【fe1fc0†L1-L57】【8c87c0†L1-L139】【9785b9†L1-L3】
- [x] Implemented ingestion-time Presidio redaction with append-only provenance ledgers and acquisition guardrails (2025-10-26)
- [x] Wired CLI automation dispatch (webhooks + CRM), primed intent store caching TTL, refreshed docs, and reran pytest/ruff/mypy/bandit/detect-secrets/uv build with ml_scoring extra installed (2025-10-28)【docs/how-to-guides/configure-pipeline.md†L1-L210】【fb2ac5†L1-L213】【ced4b9†L1-L2】【f32142†L1-L2】【beec26†L1-L21】【144294†L1-L63】【152c6a†L1-L210】
- [x] Revalidated automation + scoring integration in current workspace; reran pytest (with coverage), ruff check/format, mypy, bandit, detect-secrets, and uv build after syncing ml_scoring extra (2025-10-28)【fa865f†L1-L4】【c9d597†L1-L192】【5bcc15†L1-L3】【d42d46†L1-L2】【9a5d80†L1-L2】【37fdc1†L1-L21】【dca664†L1-L66】【1199a8†L1-L173】
- [x] Document Prefect runtime toggle for orchestration workflows (2025-10-26)【F:docs/how-to-guides/orchestrate-and-observe.md†L1-L74】
- [x] Re-ran modular CLI QA sweep (pytest, ruff check, ruff format, mypy, bandit, detect-secrets, uv build) after finalising builder migration (2025-10-26)【a97987†L1-L79】【38d75c†L1-L3】【72fd2a†L1-L3】【53fe2f†L1-L16】【821e3e†L1-L34】【48103c†L1-L64】【c97c1d†L1-L240】
- [x] Canonicalised CLI and Prefect configuration via `HotpassConfig`, refreshed docs, and added migration tooling coverage (2025-10-27)
- [ ] Extend orchestrate/resolve CLI integration coverage for advanced profile and feature permutations (Owner: QA & Engineering, Due: 2026-01-15)
- [x] Reviewed README, docs/CONTRIBUTING.md, architecture overview, workflows, CODEOWNERS, and PR template to refresh repo context and conventions (2025-10-26)
- [x] Executed baseline QA suite prior to CLI consolidation (pytest, ruff check/format, mypy, bandit, detect-secrets, uv build) (2025-10-26)【bd696d†L1-L88】【0a62a4†L1-L3】【53bc1d†L1-L2】【cb6a4e†L1-L17】【baee01†L1-L36】【167873†L1-L74】【3c322d†L1-L120】
- [x] Baseline QA suite executed (pytest 303 passed @ 88% coverage; lint/format/type/secrets/build clean; Bandit reports existing low-risk cleanup guard) (2025-10-26)【cbe9ef†L1-L123】【155bf6†L1-L2】【509179†L1-L2】【c3900e†L1-L20】【a009d0†L1-L27】【59a08e†L1-L58】【f47b44†L1-L120】
- [x] Reviewed README, docs index, contributing/style guides, and architecture overview to refresh repository context before implementation (2025-10-27)【32c63c†L1-L56】【5809ba†L1-L85】【49241b†L1-L40】【427966†L1-L40】【165b78†L1-L120】
- [x] Re-established QA baseline for current workspace (pytest with coverage, ruff check/format, mypy, bandit, detect-secrets, uv build) (2025-10-27)【5eff4c†L1-L130】【d78e01†L1-L3】【064943†L1-L2】【af2b98†L1-L8】【ff00d6†L1-L36】【02e9ca†L1-L60】【b8008c†L1-L129】
- [x] Design agent task orchestration sequence covering search, crawl, and API stages with RawRecord outputs【F:src/hotpass/data_sources/agents/tasks.py†L129-L314】
- [x] Implement provider credential caching and robots/ToS enforcement alongside provenance schema updates【F:scripts/acquisition/guardrails.py†L20-L35】【F:src/hotpass/enrichment/providers.py†L1-L200】
- [x] Add orchestrator toggles, fixtures, and regression coverage for blended acquisition before Excel ingestion【F:src/hotpass/data_sources/agents/runner.py†L1-L78】【F:tests/pipeline/test_orchestrator_features.py†L1-L200】【F:tests/data_sources/test_acquisition_agents.py†L1-L220】
- [x] QA sweep: pytest with coverage, ruff check/format, mypy, bandit, detect-secrets, uv build after acquisition orchestration changes (2025-10-27)【830186†L1-L132】【673d6c†L1-L2】【f25889†L1-L3】【47d128†L1-L8】【aa63ff†L1-L19】【8e75ea†L1-L67】【854f39†L1-L138】

## Deliverables

- [ ] Governance automation in place: commitlint, PR labeler, Release Drafter template, Renovate uv/Prefect grouping, docs + ADR (Owner: Platform, Due: 2025-12-05)
- [x] `docs/` reorganised into tutorials, how-to guides, reference, explanations, roadmap, contributing, and style content
- [x] Documented uv.core.build migration and QA entrypoint (`make qa`)【F:README.md†L36-L47】【F:docs/adr/0001-qa-tooling.md†L1-L40】
- [x] Registry adapters for CIPC/SACAA with caching, structured responses, fixtures, documentation, and policy updates landed【F:src/hotpass/enrichment/registries/base.py†L1-L208】【F:src/hotpass/enrichment/registries/cipc.py†L19-L140】【F:src/hotpass/enrichment/registries/sacaa.py†L19-L133】【F:tests/enrichment/test_registries.py†L1-L175】【F:docs/how-to-guides/configure-pipeline.md†L184-L225】【F:policy/acquisition/providers.json†L24-L36】
- [x] `.github/ISSUE_TEMPLATE/` populated with bug, docs, and task templates plus Slack contact link
- [x] `.github/workflows/docs.yml` enforces strict Sphinx builds and link checking
- [x] README, implementation status, and release summary files now point to canonical roadmap documentation
- [x] Entity registry merges optional history files while preserving identifiers and status timelines
- [x] Governance gap analysis captured in `docs/governance/gap-analysis.md` (2025-10-26)
- [x] Pytest with coverage ≥ 80% (current: 82%; optional deps satisfied)【51873d†L1-L118】
- [x] Centralised runtime warning suppression module guards pytest -W error runs (`src/hotpass/_warning_filters.py`)
- [x] Top-level package exports expose the enhanced pipeline configuration for downstream clients
- [x] Ruff lint clean (`uv run ruff check`)【7d9eff†L1-L2】
- [x] Ruff formatting clean (`uv run ruff format --check`)【15749f†L1-L2】
- [x] Mypy type checks clean (`uv run mypy src tests scripts`)【d9011e†L1-L7】
- [x] Bandit security scan clean (`uv run bandit -r src scripts`)【c8e979†L1-L23】
- [x] Detect-secrets scan clean (`uv run detect-secrets scan src tests scripts`)【d326b7†L1-L65】
- [x] Package build succeeds (`uv run uv build`)【3ee96d†L1-L179】
- [x] Docs build strict mode passes (`uv run sphinx-build -n -W -b html docs docs/_build/html`)【5a78d4†L1-L26】
- [x] Docs link check executes with curated ignore list (`uv run sphinx-build -b linkcheck docs docs/_build/linkcheck`)【f029ee†L1-L24】
- [x] Structurizr DSL workspace captures context, container, and component views (`docs/architecture/hotpass-architecture.dsl`)
- [x] Governance charter recorded in `docs/governance/project-charter.md`; metrics instrumentation captured in `docs/metrics/metrics-plan.md`
- [x] Baseline QA suite re-run prior to threat modelling (`uv run pytest --cov=src --cov=tests --cov-report=term-missing`)【6cdc80†L1-L48】
- [x] Lint/type/security/build checks re-run (`uv run ruff check`; `uv run ruff format --check`; `uv run mypy src tests scripts`; `uv run bandit -r src scripts`; `uv run detect-secrets scan src tests scripts`; `uv run uv build`)【7ea5ac†L1-L2】【19132d†L1-L2】【5a1833†L1-L2】【0f1459†L1-L32】【2503e8†L1-L60】【cb9751†L1-L103】
- [x] Security threat model documented with STRIDE/MITRE mapping (`docs/security/threat-model.md`)
- [x] Compliance baseline established with matrices and backlog (`docs/compliance/index.md`, `docs/compliance/remediation-backlog.md`)
- [x] Verification cadence and evidence catalog recorded (`docs/compliance/verification-plan.md`, `docs/compliance/evidence-catalog.md`)
- [x] High-risk compliance summary table links backlog items to evidence directories (`docs/compliance/index.md`)
- [x] Developer experience audit captured (`docs/metrics/devex-audit.md`)
- [x] Supply-chain automation documented with SBOM/provenance tooling and Backstage catalog entries (`scripts/supply_chain/*`, `templates/backstage/`, `catalog-info.yaml`)
- [x] Data acquisition guardrails logged with append-only ledgers and robots.txt/ToS enforcement (`scripts/acquisition/*`, `policy/licensing/allowlist.yml`, `policy/reuse/dep5`)
- [x] Final upgrade report published with pre-mortem, FMEA, attacker review, control matrix, and runbook (`docs/governance/upgrade-final-report.md`)
- [x] GitHub Actions workflows pinned to commit SHAs and publishing checksum manifests for refined data and supply-chain artefacts
- [x] Prefect refinement flow validates parameters via Pydantic models and rejects unsafe paths/chunk sizes with dedicated tests
- [x] Structured logging redacts configurable sensitive fields and documentation calls out the new `--sensitive-field` option
- [x] Streamlit dashboard authentication and filesystem allowlists implemented with docs, threat model, and resilience plan updates
- [x] Secrets management strategy defined with Vault rollout guidance (`docs/governance/secrets-management.md`)
- [x] Asset inventory captured in `data/inventory/asset-register.yaml` with custodians and classifications
- [x] SOC 2 risk register established with scoring and owners (`docs/security/risk-register.md`)
- [x] Enhanced pipeline enforces consent validation with overrides and compliance reporting updates
- [x] Enhanced pipeline feature orchestration extracted into helper module to satisfy fitness function limits
- [x] Consent validation audit logs persisted to `data/logs/prefect/` alongside documentation updates
- [x] Export access logs captured under `dist/logs/access/` with hashing metadata for SOC 2 evidence
- [x] Vault integration shipped for Prefect flows and CI via `hotpass.secrets` utilities and `scripts/secrets/pull_vault_secrets.py`
- [x] Quarterly verification automation script writes ledger and JSON summary (`scripts/compliance/run_verification.py`, `data/compliance/verification-log.json`)
- [x] Repository formatting normalized via `uv run ruff format` and Bandit allowlist adjustments (2025-10-26)
- [x] Shared orchestration helpers expose `PipelineRunOptions` for CLI and Prefect flows with regression coverage
- [x] Geospatial distance matrix vectorised with deterministic `GeospatialError` signalling
- [x] Evidence logging accepts deterministic clocks with dedicated tests for consent/export paths
- [x] Added telemetry attribute regression coverage and resolved Ruff UP038 lint failure for pipeline spans (2025-10-26)
- [x] Ensured final pipeline outputs apply Presidio redaction after validation and recorded audit metadata updates (2025-10-26)【F:src/hotpass/pipeline.py†L900-L956】
- [x] Brought acquisition guardrail and ScanCode compliance tooling back within lint/type style expectations (2025-10-26)【F:scripts/acquisition/guardrails.py†L1-L134】【F:scripts/compliance/check_scancode.py†L1-L120】【F:tests/test_acquisition_guardrails.py†L1-L120】
- [x] Added MCP server/client configs, Prefect agent gating helpers, regression tests, and operator documentation (2025-10-26)【F:scripts/agents/mcp_server.yaml†L1-L38】【F:scripts/agents/mcp_client.yaml†L1-L24】【F:src/hotpass/orchestration.py†L58-L401】【F:tests/test_agentic_orchestration.py†L1-L119】【F:docs/how-to-guides/agentic-orchestration.md†L1-L76】
- [x] Implemented acquisition agent plan with provider adapters, config schema integration, and regression coverage (2025-10-28)【F:src/hotpass/data_sources/agents/runner.py†L1-L140】【F:src/hotpass/enrichment/providers.py†L1-L131】【F:src/hotpass/config_schema.py†L1-L280】【F:tests/data_sources/test_acquisition_agents.py†L1-L64】
- [x] Baseline QA blocked: `uv.core.build` module missing prevents `uv run`/`uv sync`; investigate alternate bootstrap before marking gates green (Owner: Platform, Due: 2025-12-05) — Resolved by reverting the build backend to `setuptools.build_meta` and re-running `uv run make qa`.
- [x] Re-ran pytest, lint, type, security, secrets, build, ScanCode policy, and REUSE lint after redaction fix (2025-10-26)【73d144†L1-L84】【b2de32†L1-L2】【cc9e36†L1-L22】【ebfff6†L1-L28】【e8c9e1†L1-L73】【10630c†L1-L138】【b51c64†L1-L3】【d9a50d†L1-L13】
- [x] Replaced orchestrator `assert` with runtime guard and reran full QA suite (pytest, ruff check/format, mypy, bandit, detect-secrets, build) (2025-10-26)【77efe9†L1-L122】【9384df†L1-L3】【916b12†L1-L2】【339390†L1-L2】【57c315†L1-L33】【916dc1†L1-L86】【be222e†L1-L120】
- [x] Canonical configuration refactor regression suite (pytest with coverage, ruff check/format, mypy, bandit, detect-secrets, uv build) (2025-10-27)【057336†L1-L121】【bdfff8†L1-L2】【adec4c†L1-L2】【3e5b7e†L1-L14】【9c9345†L1-L32】【f1c670†L1-L53】【788b2a†L1-L220】
- [x] Completed telemetry registry mypy cleanup and reran QA suite (pytest, ruff check/format, mypy, bandit, detect-secrets, uv build) (2025-10-27)【48fd1e†L1-L66】【6c9938†L1-L2】【141570†L1-L2】【966aad†L1-L8】【48bfa5†L1-L33】【8706b2†L1-L58】【a7eea3†L1-L199】
- [x] Baseline QA (2025-10-27) surfaced missing `frictionless` import coverage, Ruff UP038 lint, and mypy stub gaps prior to telemetry refactor【c063e4†L1-L23】【0d5a32†L1-L13】【c903ed†L1-L18】
- [x] Baseline QA rerun (pytest, ruff check/format, mypy, bandit, detect-secrets, build) prior to intent automation enhancements (2025-10-28)【b1a3ec†L1-L137】【9e1ede†L1-L2】【ac8145†L1-L2】【023cf4†L1-L2】【21baf7†L1-L20】【1eb49a†L1-L66】【2b6f4f†L1-L120】
- [x] Plan telemetry registry extraction with policy enforcement, CLI/orchestrator integration, documentation refresh, and QA rerun for new observability lifecycle【F:docs/how-to-guides/orchestrate-and-observe.md†L1-L86】
- [x] Re-reviewed README, configuration how-to, CODEOWNERS, PR template, and acquisition policy to frame registry integration scope and surface assumptions/unknowns (2025-10-28)【F:README.md†L1-L48】【F:docs/how-to-guides/configure-pipeline.md†L1-L178】【F:.github/CODEOWNERS†L1-L14】【F:.github/PULL_REQUEST_TEMPLATE.md†L1-L23】【F:policy/acquisition/providers.json†L1-L20】
- [x] Re-established clean QA baseline in workspace (pytest w/ coverage, ruff check/format, mypy, bandit, detect-secrets, uv build) ahead of registry adapter work (2025-10-28)【3e4047†L1-L87】【5835c8†L1-L2】【fc57d7†L1-L2】【30993d†L1-L9】【d15fda†L1-L21】【bcb237†L1-L79】【714127†L1-L118】
- [x] Delivered registry adapters, dispatch wiring, integration fixtures, documentation, and policy updates with full QA rerun (pytest w/ coverage, ruff check/format, mypy, bandit, detect-secrets, uv build) (2025-10-28)【F:src/hotpass/enrichment/registries/base.py†L1-L208】【F:src/hotpass/enrichment/registries/cipc.py†L19-L140】【F:src/hotpass/enrichment/registries/sacaa.py†L19-L133】【F:tests/enrichment/test_registries.py†L1-L175】【F:docs/how-to-guides/configure-pipeline.md†L184-L225】【F:policy/acquisition/providers.json†L24-L36】【d1593b†L1-L126】【7d9eff†L1-L2】【15749f†L1-L2】【d9011e†L1-L7】【c8e979†L1-L23】【d326b7†L1-L65】【3ee96d†L1-L179】
- [x] Implemented CLI backfill concurrency overrides, Prefect fallback guards, and documentation updates; reran pytest w/ coverage, ruff check, mypy, bandit, detect-secrets, and uv build (2025-10-28)【030c9a†L1-L219】【34c08c†L1-L58】【1dbb84†L1-L18】【565977†L1-L19】【0bca7b†L1-L69】【3f85e6†L1-L176】【F:src/hotpass/cli/commands/backfill.py†L1-L213】【F:src/hotpass/orchestration.py†L1-L760】【F:tests/cli/test_backfill.py†L1-L168】【F:tests/test_orchestration.py†L1-L360】【F:docs/how-to-guides/orchestrate-and-observe.md†L100-L140】【F:docs/governance/pr-playbook.md†L1-L120】

## Quality Gates

- [x] Pytest with coverage ≥ 80% (current: 82%)【51873d†L1-L118】
- [x] Ruff lint clean (`uv run ruff check`)【7d9eff†L1-L2】
- [x] Ruff formatting clean (`uv run ruff format --check`)【15749f†L1-L2】
- [x] Mypy type checks clean (`uv run mypy src tests scripts`)【d9011e†L1-L7】
- [x] Bandit security scan clean (`uv run bandit -r src scripts`)【c8e979†L1-L23】
- [x] Detect-secrets scan clean (`uv run detect-secrets scan src tests scripts`)【d326b7†L1-L65】
- [x] Package build succeeds (`uv run uv build`)【3ee96d†L1-L179】
- [x] Quarterly compliance verification cadence executed (first cycle due 2025-01-15)【65fb01†L1-L3】
- [x] Accessibility smoke tests pass (`uv run pytest -m accessibility`)【1b98d5†L1-L13】
- [x] Mutation testing harness executes (`uv run python scripts/qa/run_mutation_tests.py`)【0b6520†L1-L3】
- [x] Fitness functions satisfied (`uv run python scripts/quality/fitness_functions.py`)【8eab1a†L1-L2】
- [x] SBOM generation script writes CycloneDX output (`uv run python scripts/supply_chain/generate_sbom.py`)【8b644b†L1-L2】
- [x] Provenance statement emitted (`uv run python scripts/supply_chain/generate_provenance.py`)【efd15c†L1-L2】
- [x] Prefect agent gating regression suite executes (`uv run pytest --cov=src --cov=tests --cov-report=term-missing`)【614e2b†L1-L87】
- [x] Lint/type/security/build checks re-run after agent gating updates (`uv run ruff check`; `uv run ruff format --check`; `uv run mypy src tests scripts`; `uv run bandit -r src scripts`; `uv run detect-secrets scan src tests scripts`; `uv run uv build`)【5a5346†L1-L2】【35c67e†L1-L1】【31b801†L1-L22】【a160a5†L1-L33】【cedbe4†L1-L57】【262e3d†L1-L147】
- [x] Accessibility, mutation, and evidence tooling re-run post-update (`uv run pytest -m accessibility`; `uv run python scripts/qa/run_mutation_tests.py`; `uv run python scripts/supply_chain/generate_sbom.py`)【6f2970†L1-L56】【4ebbbd†L1-L56】【c5964d†L1-L2】
- [x] Post-assert guard QA gate: pytest, ruff check/format, mypy, bandit, detect-secrets, build (`uv run pytest --cov=src --cov=tests --cov-report=term-missing`; `uv run ruff check`; `uv run ruff format --check`; `uv run mypy`; `uv run bandit -r src scripts`; `uv run detect-secrets scan`; `uv build`)【77efe9†L1-L122】【9384df†L1-L3】【916b12†L1-L2】【339390†L1-L2】【57c315†L1-L33】【916dc1†L1-L86】【be222e†L1-L120】
- [x] Fitness functions updated to guard modular pipeline stage lengths (`uv run python scripts/quality/fitness_functions.py`)【c36079†L1-L2】
- [ ] Consolidated QA gate via `make qa` currently fails at pre-commit formatting and strict mypy baseline gaps; scope hooks to changed files or remediate repository-wide issues before marking green.【addc44†L1-L4】【137f11†L1-L91】【cf6c95†L1-L120】【01b589†L1-L117】
- [ ] Local pytest baseline currently fails with `ModuleNotFoundError: No module named 'polars'`; uv-managed runs need investigation before marking tests gate green.【862623†L1-L23】【2be741†L1-L1】
- [ ] Semgrep registry scan blocked by SSL trust chain in sandbox (`uv run semgrep --config=auto`)【6c2e8a†L1-L66】
- [ ] Extend automation delivery coverage for circuit-open metrics/telemetry edge cases once additional fixtures are available.
- [x] Semgrep static analysis (`uv run semgrep --config=policy/semgrep/hotpass.yml --metrics=off`)【467a00†L1-L24】
- [x] ScanCode licence audit (`scancode --license --info --json-pp scancode-report.json --license-score 0 .`)【283e5b†L1-L14】
- [x] REUSE metadata lint (`reuse lint`)【10d37b†L1-L12】
- [x] Compliance evidence catalog refreshed (due 2025-01-15)【F:docs/compliance/evidence-catalog.md†L13-L20】
- [x] `scripts/catalog/generate_dictionary.py` emits Hotpass data dictionary (`uv run python scripts/catalog/generate_dictionary.py`)【b7480d†L1-L2】

## Links

- Tests: `.venv/bin/pytest --cov=src --cov=tests --cov-report=term-missing` (chunk `d1593b`)
- Lint: `.venv/bin/ruff check` (chunk `7d9eff`)
- Format: `.venv/bin/ruff format --check` (chunk `15749f`)
- Warning gate: `uv run pytest -W error --maxfail=1` (chunk `09f95e`)
- Types: `.venv/bin/mypy src tests scripts` (chunk `d9011e`)
- Security: `uv run bandit -r src scripts` (chunk `c8e979`)
- Secrets: `uv run detect-secrets scan src tests scripts` (chunk `d326b7`)
- Build: `uv run uv build` (chunk `3ee96d`)
- Docs build: `uv run sphinx-build -n -W -b html docs docs/_build/html` (chunk `e173e2`)
- Docs linkcheck: `uv run sphinx-build -b linkcheck docs docs/_build/linkcheck` (chunk `2b87dd`)
- Accessibility: `uv run pytest -m accessibility` (chunk `1b98d5`)
- Mutation: `uv run python scripts/qa/run_mutation_tests.py` (chunk `0b6520`)
- tsFitness functions: `uv run python scripts/quality/fitness_functions.py` (chunk `c36079`)
- SBOM: `uv run python scripts/supply_chain/generate_sbom.py` (chunk `8b644b`)
- Provenance: `uv run python scripts/supply_chain/generate_provenance.py` (chunk `efd15c`)
- Semgrep: `uv run semgrep --config=policy/semgrep/hotpass.yml --metrics=off` (chunk `467a00`)
- Compliance cadence: `uv run python scripts/compliance/run_verification.py --reviewer "Compliance Bot" --notes "Initial automation baseline"` (chunk `65fb01`)
- Compliance baseline: `docs/compliance/index.md`
- Compliance backlog: `docs/compliance/remediation-backlog.md`
- Verification cadence: `docs/compliance/verification-plan.md`
- Evidence catalog: `docs/compliance/evidence-catalog.md`
- DevEx audit: `docs/metrics/devex-audit.md`

## Risks / Notes

- Observability exporters now suppress shutdown ValueErrors; monitor CI logs after enabling full telemetry backends.
- Docker build validation now executes in CI via workflow docker build step; monitor runtime and cache behaviour in hosted runners.
- Prefect telemetry exporters still raise SSL errors when orchestrating flows in offline environments; needs hardened configuration or opt-out for air-gapped runs.
- Prefect backfill flows now fall back to synchronous execution when concurrency slots are unavailable; surface warnings in runbooks and monitor Prefect API health before reenabling shared slots.
- Baseline QA suite now passes with Splink linkage extras; ensure `python-stdnum`/`nameparser` remain available in packaged environments to avoid regressions.【e8ff23†L1-L84】
- Fitness function guard continues to fail because `pipeline.py` exceeds 1300 lines; requires targeted refactor before quality gate can be marked green.【cbd1b5†L1-L4】
- Semgrep auto-config retrieval fails under current SSL policy; rerun once trust anchors are available or pin an offline config for sandbox QA.【6c2e8a†L1-L66】
- Pytest coverage sits at ~88% with probabilistic linkage regression tests; monitor optional dependency install times in CI.【e8ff23†L1-L84】
- Ruff lint gate restored after normalizer import cleanup; revisit UP038 tuple `isinstance` refactor separately to avoid churn during linkage rollout.【5d6446†L1-L2】
- Docs link checking ignores selected external domains because of certificate issues in the sandbox; confirm connectivity in GitHub-hosted runners.
- Metrics instrumentation relies on access to Prefect Orion API, Slack webhooks, and optional Four Keys stack—validate connectivity and compliance approvals before rollout.
- Trust-boundary updates highlight new follow-ups (dashboard auth, secrets handling, CI artefact retention, Docker distribution); track owners above.
- Canonical configuration schema now powers CLI/Prefect flows; monitor downstream consumers for assumptions about legacy option dictionaries.
- Compliance matrices highlight outstanding DSAR automation, supplier assessments, and storage hardening—monitor backlog deadlines and update evidence catalog after each delivery.
- Gap analysis surfaced orchestration duplication, logging shims, entity history parsing, geospatial scaling, and audit logging coverage gaps—see new tasks for mitigation sequencing.
- Evidence paths (`data/logs/prefect/`, `data/compliance/dsar/`, `data/inventory/`, `dist/logs/access/`) now ship with READMEs; confirm retention SLAs with Compliance and Platform owners.
- Baseline QA run (2025-10-28) now green after installing `polars` wheels compatible with CPython 3.13, resolving UP038 lint, and ensuring mypy picks up bundled stubs; training-specific tests skip when `scikit-learn` extra is absent.
- Vault strategy published; next step is implementing Vault-backed delivery for CI and Prefect plus monitoring audit logs post-cutover.
- Local Semgrep ruleset focuses on high-risk patterns (eval, shell=True); expand coverage with additional rules as the backlog evolves.
- Mutation suite now exercises observability toggles in `pipeline_enhanced`; rerun kill rate report after next mutation sweep.
- CLI progress instrumentation still requires high-volume stress verification to validate operator feedback loops (tracked above).
- Shared-secret dashboard password still requires rotation and monitoring until SSO-backed auth replaces it; integrate Vault-issued credentials during rollout.
- Consent validation logs need exporting to evidence catalog once Prefect automation is wired up; track via new audit task.
- Quarterly verification automation now logs cadences; future runs must attach DSAR and supplier review findings to keep evidence meaningful.
- Ruff formatter drift resolved via repository-wide sweep; keep formatter gate enforced in CI and rerun after major merges.
- Agent orchestration redesign requires clarity on robots/ToS policy inputs, credential store interfaces, and provider availability assumptions; confirm with platform owners before enabling real HTTP fetchers.
- Registry enrichment adapters will rely on provider-issued credentials, base URLs, and published rate limits; confirm CIPC/SACAA authentication schemes and throttling policies before enabling live traffic.【F:policy/acquisition/providers.json†L1-L20】
- Bandit baseline previously flagged a low-severity cleanup in `src/hotpass/linkage/runner.py`; logging now captures failures for review.【F:src/hotpass/linkage/runner.py†L130-L139】
- Local pytest runs (`uv run pytest`) continue to raise `ModuleNotFoundError: No module named 'polars'` even though direct imports succeed; track environment drift remediation before promoting QA status.【862623†L1-L23】【2be741†L1-L1】
