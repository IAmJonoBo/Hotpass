# Prototype MCP server configuration for Hotpass Prefect orchestration
version: 1
server:
  id: hotpass-prefect-broker
  description: Prefect-hosted broker that authorises agent-triggered pipeline runs
  transport: prefect

approvals:
  roles:
    operator:
      require_manual: true
      approvers:
        - ops-leads@hotpass.example
    analyst:
      require_manual: false
    reviewer:
      require_manual: true
      approvers:
        - compliance@hotpass.example

tools:
  - name: github
    permissions:
      - pull_requests.read
      - issues.comment
    constraints:
      repositories:
        - hotpass/hotpass
        - hotpass/pipeline-governance
  - name: prefect
    permissions:
      - deployments.run
      - deployments.inspect
    constraints:
      work_pools:
        - hotpass-agent-pool
      deployments:
        - hotpass-refinement
  - name: google_drive
    permissions:
      - files.read
    constraints:
      shared_drives:
        - compliance-evidence
  - name: hotpass
    permissions:
      - tools.call
      - tools.list
    constraints:
      allow:
        - hotpass.refine
        - hotpass.enrich
        - hotpass.qa
        - hotpass.explain_provenance
        - hotpass.crawl
        - hotpass.ta.check
        - hotpass.plan.research
        - hotpass.setup
        - hotpass.net
        - hotpass.ctx
        - hotpass.env
        - hotpass.aws
        - hotpass.arc

audit:
  log_path: ./dist/agent_actions.log
  redact_fields:
    - token
    - secret
